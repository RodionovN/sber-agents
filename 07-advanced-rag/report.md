# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö RAG —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024-12-07  
**–ü—Ä–æ–µ–∫—Ç:** Advanced Hybrid RAG-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –°–±–µ—Ä–±–∞–Ω–∫–∞  
**–î–∞—Ç–∞—Å–µ—Ç:** 06-rag-qa-dataset (6 –ø—Ä–∏–º–µ—Ä–æ–≤)

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¶–µ–ª—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤](#—Ü–µ–ª—å-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤)
2. [–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è](#–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è)
3. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤)
4. [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤)
5. [–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑](#—Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π-–∞–Ω–∞–ª–∏–∑)
6. [–í—ã–≤–æ–¥—ã](#–≤—ã–≤–æ–¥—ã)

---

## –¶–µ–ª—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

–ü—Ä–æ–≤–µ—Å—Ç–∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ç—Ä–µ—Ö —Ä–µ–∂–∏–º–æ–≤ retrieval –¥–ª—è RAG —Å–∏—Å—Ç–µ–º—ã:
- **Semantic** - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- **Hybrid** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è Semantic + BM25
- **Hybrid + Reranker** - Hybrid + Cross-encoder reranking

–¶–µ–ª—å: –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∑–∞–¥–∞—á–∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –°–±–µ—Ä–±–∞–Ω–∫–∞.

---

## –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è

### –î–∞—Ç–∞—Å–µ—Ç
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** 06-rag-qa-dataset
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤:** 6
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã (–û–±—â–∏–µ —É—Å–ª–æ–≤–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫—Ä–µ–¥–∏—Ç–∞, –£—Å–ª–æ–≤–∏—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–≤) –∏ JSON (FAQ –°–±–µ—Ä–±–∞–Ω–∫–∞)
- **–¢–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤:** –í–æ–ø—Ä–æ—Å—ã –æ –∫—Ä–µ–¥–∏—Ç–∞—Ö, –≤–∫–ª–∞–¥–∞—Ö, –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –∫–∞—Ä—Ç–∞—Ö

### –ú–µ—Ç—Ä–∏–∫–∏ RAGAS

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:

1. **Faithfulness** (–û–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å) - –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ (–Ω–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π)
2. **Answer Relevancy** (–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞) - –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–µ–Ω –≤–æ–ø—Ä–æ—Å—É
3. **Answer Correctness** (–ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞) - –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —ç—Ç–∞–ª–æ–Ω–æ–º
4. **Answer Similarity** (–ü–æ—Ö–æ–∂–µ—Å—Ç—å –Ω–∞ —ç—Ç–∞–ª–æ–Ω) - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–æ—Ö–æ–∂–µ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —ç—Ç–∞–ª–æ–Ω–Ω—ã–π
5. **Context Recall** (–ü–æ–ª–Ω–æ—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞) - –Ω–∞—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–≤–µ—Ç–∞
6. **Context Precision** (–¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞) - –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **LLM:** Fireworks AI (gpt-oss-120b)
- **Embeddings:** HuggingFace (multilingual-e5-base)
- **Cross-encoder:** cross-encoder/mmarco-mMiniLMv2-L12-H384-v1
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Ü–µ–Ω–∫–∏:** LangSmith + RAGAS

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 1: Semantic Retrieval

**–î–∞—Ç–∞:** 2025-12-03  
**–†–µ–∂–∏–º:** `semantic`

```bash
RETRIEVAL_MODE=semantic
SEMANTIC_RETRIEVER_K=10
EMBEDDING_PROVIDER=huggingface
HUGGINGFACE_EMBEDDING_MODEL=intfloat/multilingual-e5-base
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ embedding similarity
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–æ–ø-10 –Ω–∞–∏–±–æ–ª–µ–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –±–ª–∏–∑–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 2: Hybrid Retrieval (Semantic + BM25)

**–î–∞—Ç–∞:** 2025-12-03  
**–†–µ–∂–∏–º:** `hybrid`

```bash
RETRIEVAL_MODE=hybrid
SEMANTIC_RETRIEVER_K=10
BM25_RETRIEVER_K=10
ENSEMBLE_SEMANTIC_WEIGHT=0.5
ENSEMBLE_BM25_WEIGHT=0.5
EMBEDDING_PROVIDER=huggingface
HUGGINGFACE_EMBEDDING_MODEL=intfloat/multilingual-e5-base
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ (semantic) –∏ –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–≥–æ (BM25) –ø–æ–∏—Å–∫–∞
- RRF (Reciprocal Rank Fusion) –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø–æ–∏—Å–∫–æ–º –ø–æ —Å–º—ã—Å–ª—É –∏ —Ç–æ—á–Ω—ã–º–∏ —Ç–µ—Ä–º–∏–Ω–∞–º–∏

---

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 3: Hybrid + Reranker

**–î–∞—Ç–∞:** 2025-12-03, 2025-12-07  
**–†–µ–∂–∏–º:** `hybrid_reranker`

#### –í–∞—Ä–∏–∞–Ω—Ç 3.1 (–±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
```bash
RETRIEVAL_MODE=hybrid_reranker
SEMANTIC_RETRIEVER_K=10
BM25_RETRIEVER_K=10
ENSEMBLE_SEMANTIC_WEIGHT=0.5
ENSEMBLE_BM25_WEIGHT=0.5
RERANKER_TOP_K=3
CROSS_ENCODER_MODEL=cross-encoder/mmarco-mMiniLMv2-L12-H384-v1
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3.2 (—É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
```bash
RETRIEVAL_MODE=hybrid_reranker
SEMANTIC_RETRIEVER_K=15
BM25_RETRIEVER_K=15
ENSEMBLE_SEMANTIC_WEIGHT=0.5
ENSEMBLE_BM25_WEIGHT=0.5
RERANKER_TOP_K=3
CROSS_ENCODER_MODEL=cross-encoder/mmarco-mMiniLMv2-L12-H384-v1
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- Hybrid retrieval + Cross-encoder –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ
- Cross-encoder —Ç–æ—á–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã (–≤–æ–ø—Ä–æ—Å, –¥–æ–∫—É–º–µ–Ω—Ç)
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ø-K –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ—Å–ª–µ reranking

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

### –¢–∞–±–ª–∏—Ü–∞ 1: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã Semantic Retrieval

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|----------|--------|
| **Faithfulness** | 0.651 | üü° –£–º–µ—Ä–µ–Ω–Ω–æ |
| **Answer Relevancy** | 0.777 | üü¢ –•–æ—Ä–æ—à–æ |
| **Answer Correctness** | 0.665 | üü° –£–º–µ—Ä–µ–Ω–Ω–æ |
| **Answer Similarity** | 0.928 | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| **Context Recall** | 0.833 | üü¢ –•–æ—Ä–æ—à–æ |
| **Context Precision** | 0.910 | üü¢ –û—Ç–ª–∏—á–Ω–æ |

**–î–∞—Ç–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞:** 2025-12-03 15:54:56

---

### –¢–∞–±–ª–∏—Ü–∞ 2: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã Hybrid + Reranker (–í–∞—Ä–∏–∞–Ω—Ç 3.1 - –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|----------|--------|
| **Faithfulness** | 0.939 | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| **Answer Relevancy** | 0.767 | üü¢ –•–æ—Ä–æ—à–æ |
| **Answer Correctness** | 0.727 | üü¢ –•–æ—Ä–æ—à–æ |
| **Answer Similarity** | 0.924 | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| **Context Recall** | 1.000 | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| **Context Precision** | 0.681 | üü° –£–º–µ—Ä–µ–Ω–Ω–æ |

**–î–∞—Ç–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞:** 2025-12-03 16:16:06

---

### –¢–∞–±–ª–∏—Ü–∞ 3: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã Hybrid + Reranker (–í–∞—Ä–∏–∞–Ω—Ç 3.2 - –ø–æ–∑–¥–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã)

| –ú–µ—Ç—Ä–∏–∫–∞ | –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 1<br>(2025-12-07 13:28:08) | –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 2<br>(2025-12-07 13:54:17) | –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 3<br>(2025-12-07 15:40:25) |
|---------|----------------------------------------|----------------------------------------|----------------------------------------|
| **Faithfulness** | 0.518 üü° | 0.394 üî¥ | 0.482 üü° |
| **Answer Relevancy** | 0.378 üî¥ | 0.503 üü° | 0.641 üü° |
| **Answer Correctness** | 0.556 üü° | 0.491 üü° | 0.634 üü° |
| **Answer Similarity** | 0.869 üü¢ | 0.875 üü¢ | 0.894 üü¢ |
| **Context Recall** | 0.667 üü° | 0.667 üü° | 0.833 üü¢ |
| **Context Precision** | 0.597 üü° | 0.486 üü° | 0.549 üü° |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∏–ª–∏ —É—Å–ª–æ–≤–∏—è–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —Ä–µ–∂–∏–º–∞–º

| –ú–µ—Ç—Ä–∏–∫–∞ | Semantic<br>(K=10) | Hybrid + Reranker<br>(K=10, Top_K=3) | Hybrid + Reranker<br>(K=15, Top_K=3) |
|---------|---------------------|--------------------------------------|--------------------------------------|
| **Faithfulness** | **0.651** üü° | **0.939** üü¢ | 0.482 üü° |
| **Answer Relevancy** | **0.777** üü¢ | 0.767 üü¢ | **0.641** üü° |
| **Answer Correctness** | 0.665 üü° | **0.727** üü¢ | 0.634 üü° |
| **Answer Similarity** | **0.928** üü¢ | 0.924 üü¢ | 0.894 üü¢ |
| **Context Recall** | 0.833 üü¢ | **1.000** üü¢ | 0.833 üü¢ |
| **Context Precision** | **0.910** üü¢ | 0.681 üü° | 0.549 üü° |

### –ê–Ω–∞–ª–∏–∑ –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º

#### 1. Faithfulness (–û–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)
- **–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Hybrid + Reranker (–±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è) - **0.939**
- **Semantic:** 0.651 - —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–µ–∂–∏–º–∞
- **–í—ã–≤–æ–¥:** Reranking –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç faithfulness, —Ñ–∏–ª—å—Ç—Ä—É—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

#### 2. Answer Relevancy (–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞)
- **–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Semantic - **0.777**
- **Hybrid + Reranker:** 0.767 (–±–∞–∑–æ–≤–∞—è) - –±–ª–∏–∑–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–í—ã–≤–æ–¥:** Semantic —Ä–µ–∂–∏–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—ã—Å–æ–∫—É—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å

#### 3. Answer Correctness (–ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞)
- **–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Hybrid + Reranker (–±–∞–∑–æ–≤–∞—è) - **0.727**
- **Semantic:** 0.665 - —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–í—ã–≤–æ–¥:** Reranking —É–ª—É—á—à–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ –∑–∞ —Å—á–µ—Ç –ª—É—á—à–µ–≥–æ –æ—Ç–±–æ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### 4. Answer Similarity (–ü–æ—Ö–æ–∂–µ—Å—Ç—å –Ω–∞ —ç—Ç–∞–ª–æ–Ω)
- **–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Semantic - **0.928**
- **Hybrid + Reranker:** 0.924 (–±–∞–∑–æ–≤–∞—è) - –æ—á–µ–Ω—å –±–ª–∏–∑–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–í—ã–≤–æ–¥:** –û–±–∞ —Ä–µ–∂–∏–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏

#### 5. Context Recall (–ü–æ–ª–Ω–æ—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- **–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Hybrid + Reranker (–±–∞–∑–æ–≤–∞—è) - **1.000**
- **Semantic:** 0.833 - —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–í—ã–≤–æ–¥:** Hybrid —Ä–µ–∂–∏–º —Å reranking –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

#### 6. Context Precision (–¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞)
- **–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Semantic - **0.910**
- **Hybrid + Reranker:** 0.681 (–±–∞–∑–æ–≤–∞—è) - –∑–∞–º–µ—Ç–Ω–æ –Ω–∏–∂–µ
- **–í—ã–≤–æ–¥:** Semantic —Ä–µ–∂–∏–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª—É—á—à—É—é —Ç–æ—á–Ω–æ—Å—Ç—å, –≤–æ–∑–º–æ–∂–Ω–æ –∏–∑-–∑–∞ –º–µ–Ω—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã Semantic —Ä–µ–∂–∏–º–∞:**
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ (Context Precision: 0.910)
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (Answer Relevancy: 0.777)
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –ø–æ—Ö–æ–∂–µ—Å—Ç—å –Ω–∞ —ç—Ç–∞–ª–æ–Ω (Answer Similarity: 0.928)
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã Hybrid + Reranker —Ä–µ–∂–∏–º–∞:**
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å (Faithfulness: 0.939)
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (Context Recall: 1.000)
- ‚úÖ –õ—É—á—à–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (Answer Correctness: 0.727)
- ‚úÖ –ö–æ–º–±–∏–Ω–∞—Ü–∏—è semantic –∏ keyword search

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚ö†Ô∏è Hybrid + Reranker –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö
- ‚ö†Ô∏è Context Precision –Ω–∏–∂–µ —É Hybrid + Reranker (–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑-–∑–∞ –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –≤—Ö–æ–¥–µ reranker)

---

## –í—ã–≤–æ–¥—ã

### 1. –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è production

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Hybrid + Reranker (–±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è faithfulness (0.939) - –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (Context Recall: 1.000)
- –õ—É—á—à–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (Answer Correctness: 0.727)
- –•–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```bash
RETRIEVAL_MODE=hybrid_reranker
SEMANTIC_RETRIEVER_K=10
BM25_RETRIEVER_K=10
ENSEMBLE_SEMANTIC_WEIGHT=0.5
ENSEMBLE_BM25_WEIGHT=0.5
RERANKER_TOP_K=3
CROSS_ENCODER_MODEL=cross-encoder/mmarco-mMiniLMv2-L12-H384-v1
```

### 2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Semantic —Ä–µ–∂–∏–º**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ (Context Precision: 0.910)
- –•–æ—Ä–æ—à–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (Answer Relevancy: 0.777)
- –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª—É—á–∞–µ–≤, –≥–¥–µ —Å–∫–æ—Ä–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏

### 3. –ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

1. **Reranking –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è faithfulness:** –£–ª—É—á—à–µ–Ω–∏–µ —Å 0.651 –¥–æ 0.939 (+44%)
2. **Hybrid —Ä–µ–∂–∏–º —É–ª—É—á—à–∞–µ—Ç recall:** –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
3. **Semantic —Ä–µ–∂–∏–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª—É—á—à—É—é precision:** –ú–µ–Ω—å—à–µ —à—É–º–∞ –≤ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
4. **–í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:** –ü–æ–∑–¥–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –ø–æ–∫–∞–∑–∞–ª–∏ —Å–Ω–∏–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

### 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

1. **–£–≤–µ–ª–∏—á–∏—Ç—å –¥–∞—Ç–∞—Å–µ—Ç:** –¢–µ–∫—É—â–∏–π –¥–∞—Ç–∞—Å–µ—Ç –∏–∑ 6 –ø—Ä–∏–º–µ—Ä–æ–≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏
2. **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
   - –£–≤–µ–ª–∏—á–∏—Ç—å `SEMANTIC_RETRIEVER_K` –∏ `BM25_RETRIEVER_K` –¥–æ 15-20
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `RERANKER_TOP_K` (3, 5, 7)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å–∞ ensemble (0.6/0.4, 0.7/0.3)
3. **–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã:** –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ LangSmith –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –î–µ—Ç–∞–ª–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 1: Semantic Retrieval
- **–î–∞—Ç–∞:** 2025-12-03 15:54:56
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ:** 589
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~13 –º–∏–Ω—É—Ç
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –û–¥–∏–Ω –ø—Ä–∏–º–µ—Ä –ø–æ–∫–∞–∑–∞–ª nan –¥–ª—è faithfulness (–≤–æ–∑–º–æ–∂–Ω–æ rate limit)

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 2: Hybrid + Reranker (–±–∞–∑–æ–≤–∞—è)
- **–î–∞—Ç–∞:** 2025-12-03 16:16:06
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ:** 589
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~14 –º–∏–Ω—É—Ç
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –û–¥–∏–Ω –ø—Ä–∏–º–µ—Ä –ø–æ–∫–∞–∑–∞–ª nan –¥–ª—è faithfulness

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 3: Hybrid + Reranker (–ø–æ–∑–¥–Ω–∏–µ)
- **–î–∞—Ç—ã:** 2025-12-07 (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—É—Å–∫–æ–≤)
- **–í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞—Ä—å–∏—Ä–æ–≤–∞–ª–∏—Å—å –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∏–ª–∏ —É—Å–ª–æ–≤–∏—è—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2024-12-07  
**–ê–≤—Ç–æ—Ä:** RAG Evaluation System  
**–í–µ—Ä—Å–∏—è:** 1.0

